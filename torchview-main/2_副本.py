# generate by ChatGPT
import json
import networkx as nx

def json_to_networkx(json_data):
    # 将JSON数据加载为Python字典
    data_dict = json.loads(json_data)
    
    # 使用node_link_graph函数创建NetworkX图
    G = nx.node_link_graph(data_dict)
    
    return G

if __name__ == "__main__":
    # JSON模板
    json_template = '''
    {{
    "nodes": [{}],
    "links": [{}]
    }}
    '''
    # 节点和边数据模板
    nodes_template = '{{ "id": "{}", "data": {{ "input_shape": "{}", "output_shape": "{}" }} }}'
    links_template = '{{ "source": "{}", "target": "{}", "weight": {} }}'

    # 填充节点和边数据
    nodes_data = [
        nodes_template.format("A", 123, 321),
        nodes_template.format("B", 456, 654),
        nodes_template.format("C", 789, 987)        
        # nodes_template.format("A", "red", "circle"),
        # nodes_template.format("B", "blue", "square"),
        # nodes_template.format("C", "green", "triangle")
    ]

    links_data = [
        links_template.format("A", "B", 2),
        links_template.format("B", "C", 1),
        links_template.format("C", "A", 3)
    ]

    # 使用format方法填充节点和边数据
    batch_json_data = json_template.format(
        ', '.join(nodes_data),
        ', '.join(links_data)
    )

    # 将JSON数据转换为NetworkX图
    graph = json_to_networkx(batch_json_data)
    
    # 打印节点和边，包括权重信息
    print("Nodes:", graph.nodes(data=True))
    print("Edges:", graph.edges(data=True))
    
    # 使用NetworkX的其他功能进行分析和操作
    # 例如，计算节点度和可视化图形等

result = '
{"nodes": [
    { "id": "A", "data": { "input_shape": "123", "output_shape": "321" } }, 
    { "id": "B", "data": { "input_shape": "456", "output_shape": "654" } },
    { "id": "C", "data": { "input_shape": "789", "output_shape": "987" } }],\n    
"links": [
    { "source": "A", "target": "B", "weight": 2 }, 
    { "source": "B", "target": "C", "weight": 1 }, 
    { "source": "C", "target": "A", "weight": 3 }
    ]}
'
graph_value = '
{"nodes": [
    { "id": "input-tensor","name":"0", "data": { "input_size": "(1, 3, 224, 224)", "output_size": "(1, 3, 224, 224)" } },
    { "id": "Sequential","name":"1", "data": { "input_size": "(1, 3, 224, 224)", "output_size": "(1, 32, 112, 112)" } },
    { "id": "Conv2d","name":"2", "data": { "input_size": "(1, 32, 112, 112)", "output_size": "(1, 32, 112, 112)" } },
    { "id": "BatchNorm2d","name":"3", "data": { "input_size": "(1, 32, 112, 112)", "output_size": "(1, 32, 112, 112)" } },{ "id": "ReLU","name":"4", "data": { "input_size": "(1, 32, 112, 112)", "output_size": "(1, 32, 112, 112)" } },{ "id": "Conv2d","name":"5", "data": { "input_size": "(1, 32, 112, 112)", "output_size": "(1, 32, 112, 112)" } },{ "id": "BatchNorm2d","name":"6", "data": { "input_size": "(1, 32, 112, 112)", "output_size": "(1, 32, 112, 112)" } },{ "id": "ReLU","name":"7", "data": { "input_size": "(1, 32, 112, 112)", "output_size": "(1, 32, 112, 112)" } },{ "id": "Conv2d","name":"8", "data": { "input_size": "(1, 32, 112, 112)", "output_size": "(1, 160, 55, 55)" } },{ "id": "BatchNorm2d","name":"9", "data": { "input_size": "(1, 160, 55, 55)", "output_size": "(1, 160, 55, 55)" } },{ "id": "ReLU","name":"10", "data": { "input_size": "(1, 160, 55, 55)", "output_size": "(1, 160, 55, 55)" } },{ "id": "Identity","name":"11", "data": { "input_size": "(1, 160, 55, 55)", "output_size": "(1, 160, 55, 55)" } },{ "id": "Conv2d","name":"12", "data": { "input_size": "(1, 160, 55, 55)", "output_size": "(1, 32, 55, 55)" } },{ "id": "BatchNorm2d","name":"13", "data": { "input_size": "(1, 32, 55, 55)", "output_size": "(1, 32, 55, 55)" } },{ "id": "Conv2d","name":"14", "data": { "input_size": "(1, 32, 55, 55)", "output_size": "(1, 160, 55, 55)" } },{ "id": "BatchNorm2d","name":"15", "data": { "input_size": "(1, 160, 55, 55)", "output_size": "(1, 160, 55, 55)" } },{ "id": "ReLU","name":"16", "data": { "input_size": "(1, 160, 55, 55)", "output_size": "(1, 160, 55, 55)" } },{ "id": "Identity","name":"17", "data": { "input_size": "(1, 160, 55, 55)", "output_size": "(1, 160, 55, 55)" } },{ "id": "Conv2d","name":"18", "data": { "input_size": "(1, 160, 55, 55)", "output_size": "(1, 32, 55, 55)" } },{ "id": "BatchNorm2d","name":"19", "data": { "input_size": "(1, 32, 55, 55)", "output_size": "(1, 32, 55, 55)" } },{ "id": "add_","name":"20", "data": { "input_size": "2 x (1, 32, 55, 55)", "output_size": "(1, 32, 55, 55)" } },{ "id": "Conv2d","name":"21", "data": { "input_size": "(1, 32, 55, 55)", "output_size": "(1, 160, 27, 27)" } },{ "id": "BatchNorm2d","name":"22", "data": { "input_size": "(1, 160, 27, 27)", "output_size": "(1, 160, 27, 27)" } },{ "id": "ReLU","name":"23", "data": { "input_size": "(1, 160, 27, 27)", "output_size": "(1, 160, 27, 27)" } },{ "id": "Identity","name":"24", "data": { "input_size": "(1, 160, 27, 27)", "output_size": "(1, 160, 27, 27)" } },{ "id": "Conv2d","name":"25", "data": { "input_size": "(1, 160, 27, 27)", "output_size": "(1, 64, 27, 27)" } },{ "id": "BatchNorm2d","name":"26", "data": { "input_size": "(1, 64, 27, 27)", "output_size": "(1, 64, 27, 27)" } },{ "id": "Conv2d","name":"27", "data": { "input_size": "(1, 64, 27, 27)", "output_size": "(1, 320, 27, 27)" } },{ "id": "BatchNorm2d","name":"28", "data": { "input_size": "(1, 320, 27, 27)", "output_size": "(1, 320, 27, 27)" } },{ "id": "ReLU","name":"29", "data": { "input_size": "(1, 320, 27, 27)", "output_size": "(1, 320, 27, 27)" } },{ "id": "Identity","name":"30", "data": { "input_size": "(1, 320, 27, 27)", "output_size": "(1, 320, 27, 27)" } },{ "id": "Conv2d","name":"31", "data": { "input_size": "(1, 320, 27, 27)", "output_size": "(1, 64, 27, 27)" } },{ "id": "BatchNorm2d","name":"32", "data": { "input_size": "(1, 64, 27, 27)", "output_size": "(1, 64, 27, 27)" } },{ "id": "add_","name":"33", "data": { "input_size": "2 x (1, 64, 27, 27)", "output_size": "(1, 64, 27, 27)" } },{ "id": "Conv2d","name":"34", "data": { "input_size": "(1, 64, 27, 27)", "output_size": "(1, 320, 27, 27)" } },{ "id": "BatchNorm2d","name":"35", "data": { "input_size": "(1, 320, 27, 27)", "output_size": "(1, 320, 27, 27)" } },{ "id": "ReLU","name":"36", "data": { "input_size": "(1, 320, 27, 27)", "output_size": "(1, 320, 27, 27)" } },{ "id": "Identity","name":"37", "data": { "input_size": "(1, 320, 27, 27)", "output_size": "(1, 320, 27, 27)" } },{ "id": "Conv2d","name":"38", "data": { "input_size": "(1, 320, 27, 27)", "output_size": "(1, 64, 27, 27)" } },{ "id": "BatchNorm2d","name":"39", "data": { "input_size": "(1, 64, 27, 27)", "output_size": "(1, 64, 27, 27)" } },{ "id": "add_","name":"40", "data": { "input_size": "2 x (1, 64, 27, 27)", "output_size": "(1, 64, 27, 27)" } },{ "id": "Conv2d","name":"41", "data": { "input_size": "(1, 64, 27, 27)", "output_size": "(1, 320, 27, 27)" } },{ "id": "BatchNorm2d","name":"42", "data": { "input_size": "(1, 320, 27, 27)", "output_size": "(1, 320, 27, 27)" } },{ "id": "SiLU","name":"43", "data": { "input_size": "(1, 320, 27, 27)", "output_size": "(1, 320, 27, 27)" } },{ "id": "Conv2d","name":"44", "data": { "input_size": "(1, 320, 27, 27)", "output_size": "(1, 320, 14, 14)" } },{ "id": "BatchNorm2d","name":"45", "data": { "input_size": "(1, 320, 14, 14)", "output_size": "(1, 320, 14, 14)" } },{ "id": "SiLU","name":"46", "data": { "input_size": "(1, 320, 14, 14)", "output_size": "(1, 320, 14, 14)" } },{ "id": "Identity","name":"47", "data": { "input_size": "(1, 320, 14, 14)", "output_size": "(1, 320, 14, 14)" } },{ "id": "Conv2d","name":"48", "data": { "input_size": "(1, 320, 14, 14)", "output_size": "(1, 256, 14, 14)" } },{ "id": "BatchNorm2d","name":"49", "data": { "input_size": "(1, 256, 14, 14)", "output_size": "(1, 256, 14, 14)" } },{ "id": "Conv2d","name":"50", "data": { "input_size": "(1, 256, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "BatchNorm2d","name":"51", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "SiLU","name":"52", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "Conv2d","name":"53", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "BatchNorm2d","name":"54", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "SiLU","name":"55", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "Identity","name":"56", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "Conv2d","name":"57", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 256, 14, 14)" } },{ "id": "BatchNorm2d","name":"58", "data": { "input_size": "(1, 256, 14, 14)", "output_size": "(1, 256, 14, 14)" } },{ "id": "add_","name":"59", "data": { "input_size": "2 x (1, 256, 14, 14)", "output_size": "(1, 256, 14, 14)" } },{ "id": "Conv2d","name":"60", "data": { "input_size": "(1, 256, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "BatchNorm2d","name":"61", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "SiLU","name":"62", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "Conv2d","name":"63", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "BatchNorm2d","name":"64", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "SiLU","name":"65", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "Identity","name":"66", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "Conv2d","name":"67", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 256, 14, 14)" } },{ "id": "BatchNorm2d","name":"68", "data": { "input_size": "(1, 256, 14, 14)", "output_size": "(1, 256, 14, 14)" } },{ "id": "add_","name":"69", "data": { "input_size": "2 x (1, 256, 14, 14)", "output_size": "(1, 256, 14, 14)" } },{ "id": "Conv2d","name":"70", "data": { "input_size": "(1, 256, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "BatchNorm2d","name":"71", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "ReLU","name":"72", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 14, 14)" } },{ "id": "Conv2d","name":"73", "data": { "input_size": "(1, 1280, 14, 14)", "output_size": "(1, 1280, 7, 7)" } },{ "id": "BatchNorm2d","name":"74", "data": { "input_size": "(1, 1280, 7, 7)", "output_size": "(1, 1280, 7, 7)" } },{ "id": "ReLU","name":"75", "data": { "input_size": "(1, 1280, 7, 7)", "output_size": "(1, 1280, 7, 7)" } },{ "id": "SqueezeExcite","name":"76", "data": { "input_size": "(1, 1280, 7, 7)", "output_size": "(1, 1280, 7, 7)" } },{ "id": "Conv2d","name":"77", "data": { "input_size": "(1, 1280, 7, 7)", "output_size": "(1, 704, 7, 7)" } },{ "id": "BatchNorm2d","name":"78", "data": { "input_size": "(1, 704, 7, 7)", "output_size": "(1, 704, 7, 7)" } },{ "id": "Conv2d","name":"79", "data": { "input_size": "(1, 704, 7, 7)", "output_size": "(1, 3520, 7, 7)" } },{ "id": "BatchNorm2d","name":"80", "data": { "input_size": "(1, 3520, 7, 7)", "output_size": "(1, 3520, 7, 7)" } },{ "id": "ReLU","name":"81", "data": { "input_size": "(1, 3520, 7, 7)", "output_size": "(1, 3520, 7, 7)" } },{ "id": "Conv2d","name":"82", "data": { "input_size": "(1, 3520, 7, 7)", "output_size": "(1, 3520, 7, 7)" } },{ "id": "BatchNorm2d","name":"83", "data": { "input_size": "(1, 3520, 7, 7)", "output_size": "(1, 3520, 7, 7)" } },{ "id": "ReLU","name":"84", "data": { "input_size": "(1, 3520, 7, 7)", "output_size": "(1, 3520, 7, 7)" } },{ "id": "SqueezeExcite","name":"85", "data": { "input_size": "(1, 3520, 7, 7)", "output_size": "(1, 3520, 7, 7)" } },{ "id": "Conv2d","name":"86", "data": { "input_size": "(1, 3520, 7, 7)", "output_size": "(1, 704, 7, 7)" } },{ "id": "BatchNorm2d","name":"87", "data": { "input_size": "(1, 704, 7, 7)", "output_size": "(1, 704, 7, 7)" } },{ "id": "add_","name":"88", "data": { "input_size": "2 x (1, 704, 7, 7)", "output_size": "(1, 704, 7, 7)" } },{ "id": "Sequential","name":"89", "data": { "input_size": "(1, 704, 7, 7)", "output_size": "(1, 1000)" } },{ "id": "output-tensor","name":"90", "data": { "input_size": "(1, 1000)", "output_size": "(1, 1000)" } }
    ],
"links": [
    { "source": "0", "target": "1", "weight": None ,"count":1 },
    { "source": "1", "target": "2", "weight": None ,"count":1 },
    { "source": "2", "target": "3", "weight": None ,"count":1 },{ "source": "3", "target": "4", "weight": None ,"count":1 },{ "source": "4", "target": "5", "weight": None ,"count":1 },{ "source": "5", "target": "6", "weight": None ,"count":1 },{ "source": "6", "target": "7", "weight": None ,"count":1 },{ "source": "7", "target": "8", "weight": None ,"count":1 },{ "source": "8", "target": "9", "weight": None ,"count":1 },{ "source": "9", "target": "10", "weight": None ,"count":1 },{ "source": "10", "target": "11", "weight": None ,"count":1 },{ "source": "11", "target": "12", "weight": None ,"count":1 },{ "source": "12", "target": "13", "weight": None ,"count":1 },{ "source": "13", "target": "14", "weight": None ,"count":1 },{ "source": "13", "target": "20", "weight": None ,"count":1 },{ "source": "14", "target": "15", "weight": None ,"count":1 },{ "source": "15", "target": "16", "weight": None ,"count":1 },{ "source": "16", "target": "17", "weight": None ,"count":1 },{ "source": "17", "target": "18", "weight": None ,"count":1 },{ "source": "18", "target": "19", "weight": None ,"count":1 },{ "source": "19", "target": "20", "weight": None ,"count":1 },{ "source": "20", "target": "21", "weight": None ,"count":1 },{ "source": "21", "target": "22", "weight": None ,"count":1 },{ "source": "22", "target": "23", "weight": None ,"count":1 },{ "source": "23", "target": "24", "weight": None ,"count":1 },{ "source": "24", "target": "25", "weight": None ,"count":1 },{ "source": "25", "target": "26", "weight": None ,"count":1 },{ "source": "26", "target": "27", "weight": None ,"count":1 },{ "source": "26", "target": "33", "weight": None ,"count":1 },{ "source": "27", "target": "28", "weight": None ,"count":1 },{ "source": "28", "target": "29", "weight": None ,"count":1 },{ "source": "29", "target": "30", "weight": None ,"count":1 },{ "source": "30", "target": "31", "weight": None ,"count":1 },{ "source": "31", "target": "32", "weight": None ,"count":1 },{ "source": "32", "target": "33", "weight": None ,"count":1 },{ "source": "33", "target": "34", "weight": None ,"count":1 },{ "source": "33", "target": "40", "weight": None ,"count":1 },{ "source": "34", "target": "35", "weight": None ,"count":1 },{ "source": "35", "target": "36", "weight": None ,"count":1 },{ "source": "36", "target": "37", "weight": None ,"count":1 },{ "source": "37", "target": "38", "weight": None ,"count":1 },{ "source": "38", "target": "39", "weight": None ,"count":1 },{ "source": "39", "target": "40", "weight": None ,"count":1 },{ "source": "40", "target": "41", "weight": None ,"count":1 },{ "source": "41", "target": "42", "weight": None ,"count":1 },{ "source": "42", "target": "43", "weight": None ,"count":1 },{ "source": "43", "target": "44", "weight": None ,"count":1 },{ "source": "44", "target": "45", "weight": None ,"count":1 },{ "source": "45", "target": "46", "weight": None ,"count":1 },{ "source": "46", "target": "47", "weight": None ,"count":1 },{ "source": "47", "target": "48", "weight": None ,"count":1 },{ "source": "48", "target": "49", "weight": None ,"count":1 },{ "source": "49", "target": "50", "weight": None ,"count":1 },{ "source": "49", "target": "59", "weight": None ,"count":1 },{ "source": "50", "target": "51", "weight": None ,"count":1 },{ "source": "51", "target": "52", "weight": None ,"count":1 },{ "source": "52", "target": "53", "weight": None ,"count":1 },{ "source": "53", "target": "54", "weight": None ,"count":1 },{ "source": "54", "target": "55", "weight": None ,"count":1 },{ "source": "55", "target": "56", "weight": None ,"count":1 },{ "source": "56", "target": "57", "weight": None ,"count":1 },{ "source": "57", "target": "58", "weight": None ,"count":1 },{ "source": "58", "target": "59", "weight": None ,"count":1 },{ "source": "59", "target": "60", "weight": None ,"count":1 },{ "source": "59", "target": "69", "weight": None ,"count":1 },{ "source": "60", "target": "61", "weight": None ,"count":1 },{ "source": "61", "target": "62", "weight": None ,"count":1 },{ "source": "62", "target": "63", "weight": None ,"count":1 },{ "source": "63", "target": "64", "weight": None ,"count":1 },{ "source": "64", "target": "65", "weight": None ,"count":1 },{ "source": "65", "target": "66", "weight": None ,"count":1 },{ "source": "66", "target": "67", "weight": None ,"count":1 },{ "source": "67", "target": "68", "weight": None ,"count":1 },{ "source": "68", "target": "69", "weight": None ,"count":1 },{ "source": "69", "target": "70", "weight": None ,"count":1 },{ "source": "70", "target": "71", "weight": None ,"count":1 },{ "source": "71", "target": "72", "weight": None ,"count":1 },{ "source": "72", "target": "73", "weight": None ,"count":1 },{ "source": "73", "target": "74", "weight": None ,"count":1 },{ "source": "74", "target": "75", "weight": None ,"count":1 },{ "source": "75", "target": "76", "weight": None ,"count":1 },{ "source": "76", "target": "77", "weight": None ,"count":1 },{ "source": "77", "target": "78", "weight": None ,"count":1 },{ "source": "78", "target": "79", "weight": None ,"count":1 },{ "source": "78", "target": "88", "weight": None ,"count":1 },{ "source": "79", "target": "80", "weight": None ,"count":1 },{ "source": "80", "target": "81", "weight": None ,"count":1 },{ "source": "81", "target": "82", "weight": None ,"count":1 },{ "source": "82", "target": "83", "weight": None ,"count":1 },{ "source": "83", "target": "84", "weight": None ,"count":1 },{ "source": "84", "target": "85", "weight": None ,"count":1 },{ "source": "85", "target": "86", "weight": None ,"count":1 },{ "source": "86", "target": "87", "weight": None ,"count":1 },{ "source": "87", "target": "88", "weight": None ,"count":1 },{ "source": "88", "target": "89", "weight": None ,"count":1 },{ "source": "89", "target": "90", "weight": None ,"count":1 }]}'
